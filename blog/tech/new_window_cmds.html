<!DOCTYPE html> <html lang="en"> <head> <!-- 2025-03-24 Mon 21:30 --> <meta charset="utf-8"> <title> New window commands for emacs </title> <meta name="author" content="Pranshu Sharma"> <meta name="generator" content="Org Mode"> <link href="https://cdn.jsdelivr.net/npm/typeface-et-book@0.0/et-book/et-book.min.css%20" rel="stylesheet"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" type="image/x-icon" href="../../asset/favicon.png"> <style type="text/css"> #content { max-width: 60em; margin: auto; } .subtitle { text-align: center; font-size: medium; font-weight: bold; margin-top:0; } .todo { font-family: monospace; color: red; } .done { font-family: monospace; color: green; } .priority { font-family: monospace; color: orange; } .tag { background-color: #eee; font-family: monospace; padding: 2px; font-size: 80%; font-weight: normal; } .timestamp { color: #bebebe; } .timestamp-kwd { color: #5f9ea0; } .org-right { margin-left: auto; margin-right: 0px; text-align: right; } .org-left { margin-left: 0px; margin-right: auto; text-align: left; } .org-center { margin-left: auto; margin-right: auto; text-align: center; } .underline { text-decoration: underline; } #postamble p, #preamble p { font-size: 90%; margin: .2em; } p.verse { margin-left: 3%; } pre { border: 1px solid #e6e6e6; border-radius: 3px; background-color: #f2f2f2; padding: 8pt; font-family: monospace; overflow: auto; margin: 1.2em; } pre.src { position: relative; overflow: auto; } table { border-collapse:collapse; } caption.t-above { caption-side: top; } caption.t-bottom { caption-side: bottom; } td, th { vertical-align:top; } th.org-right { text-align: center; } th.org-left { text-align: center; } th.org-center { text-align: center; } td.org-right { text-align: right; } td.org-left { text-align: left; } td.org-center { text-align: center; } dt { font-weight: bold; } .footpara { display: inline; } .footdef { margin-bottom: 1em; } .figure { padding: 1em; } .figure p { text-align: center; } .equation-container { display: table; text-align: center; width: 100%; } .equation { vertical-align: middle; } .equation-label { display: table-cell; text-align: right; vertical-align: middle; } .inlinetask { padding: 10px; border: 2px solid gray; margin: 10px; background: #ffffcc; } #org-div-home-and-up { text-align: right; font-size: 70%; white-space: nowrap; } textarea { overflow-x: auto; } .linenr { font-size: smaller } .code-highlighted { background-color: #ffff00; } .org-info-js_search-highlight { background-color: #ffff00; color: #000000; font-weight: bold; } .org-svg { } </style> <link rel="stylesheet" href="../../asset/tufte.css" type="text/css"> <link rel="stylesheet" href="../../asset/fonts.css" type="text/css"> <link rel="stylesheet" href="../../asset/ox-tufte.css" type="text/css"> <link rel="stylesheet" href="../../asset/main.css" type="text/css"> <script> window.MathJax = { tex: { ams: { multlineWidth: '85%' }, tags: 'ams', tagSide: 'right', tagIndent: '.8em' }, chtml: { scale: 1.0, displayAlign: 'center', displayIndent: '0em' }, svg: { scale: 1.0, displayAlign: 'center', displayIndent: '0em' }, output: { font: 'mathjax-modern', displayOverflow: 'overflow' } }; </script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script> </head> <body> <nav class="navbar"> <ul> <li><a href="../../"> Home </a></li> <li><a href="../"> Blog </a></li> </ul> </nav> <h3 style="text-align: center; margin-bottom: -1em; margin-top: 1em;color: green;"> 2025-03-29 </h3> <article id="content" class="content"> <header> <h1 class="title">New window commands for emacs</h1> </header><nav id="table-of-contents" role="doc-toc"> <h2>Table of Contents</h2> <div id="text-table-of-contents" role="doc-toc"> <ul> <li><a href="new_window_cmds.html#org9639605">Intro</a></li> <li> <a href="new_window_cmds.html#org7f6f53b">Commands</a> <ul> <li><a href="new_window_cmds.html#org9beed48">Transpose</a></li> <li><a href="new_window_cmds.html#orgfa898cb">Rotate layout</a></li> <li><a href="new_window_cmds.html#org0043671">Flip</a></li> <li><a href="new_window_cmds.html#org1520f12">Cycle (rotate windows)</a></li> </ul> </li> </ul> </div> </nav> <section id="outline-container-org9639605" class="outline-2"> <h2 id="org9639605">Intro</h2> <div class="outline-text-2" id="text-org9639605"> <p> Around September 2024, I also discovered this useful package for emacs windows management <a href="https://www.emacswiki.org/emacs/TransposeFrame">transpose-frame.el</a>. </p> <p> Around this time, I read Tobias' great article on <a href="https://blogs.gnome.org/tbernard/2020/01/17/doing-things-that-scale/">doing things that scale</a><label id="fnr.1" for="fnr-in.1.9790334" class="margin-toggle sidenote-number"><sup class="numeral">1</sup></label><input type="checkbox" id="fnr-in.1.9790334" class="margin-toggle"><span class="sidenote"><sup class="numeral">1</sup> TLDR: instead of customizing and maintaing customizations, try push changes to upstream </span>. </p> <p> So of course, as a changed man, I sent a simple email asking for <code>tranpose-frame.el</code> to be moved to emacs core. But as it turned out, the package had many things wrong at it's core which would be impossible to fix without a rewrite. </p> <p> Basiclly, <code>transpose-frame.el</code> relies on "copy pasting" window states(like the buffer, overlays, etc&hellip;), which was a faulty approach<label id="fnr.2" for="fnr-in.2.2856921" class="margin-toggle sidenote-number"><sup class="numeral">2</sup></label><input type="checkbox" id="fnr-in.2.2856921" class="margin-toggle"><span class="sidenote"><sup class="numeral">2</sup> This <a href="https://yhetil.org/emacs-devel/ac1735fd-e023-4e01-a3e2-2bd19087594c@gmx.at/">mail</a> goes in more detail about what was wrong with <code>transpose-frame.el</code> </span>. The correct approach required new code in emacs <i>C-land</i> to be able to 'necromance' window objects when using the function <code>split-window</code>. For this reason, simply changing up the code in <code>transpose-frame.el</code> would not be sufficant. A full rewrite was required. </p> <p> So, not knowing how much work was in, I agreed to do it. So after about 4 months of infrequent, <i>painful</i> work <label for="mn-auto.6293918" class="margin-toggle">&oplus;</label><input type="checkbox" id="mn-auto.6293918" class="margin-toggle"><span class="marginnote"> The emacs window system is much, much, more complex than what meets the surface </span>, including constant collaboration with Martin Rudalics, the <code>windows.c</code> and <code>windows.el</code> maintainer who take care of all the code in the <i>C-land</i> size. <b>Now</b>, emacs 31 has all the functionality that <code>transpose-frame.el</code> had, plus extra. The file containg all these comands is <code>window-x.el</code>, which <b>can be found here</b>: <a href="https://github.com/emacs-mirror/emacs/blob/master/lisp/window-x.el">https://github.com/emacs-mirror/emacs/blob/master/lisp/window-x.el</a>. </p> </div> </section> <section id="outline-container-org7f6f53b" class="outline-2"> <h2 id="org7f6f53b">Commands</h2> <div class="outline-text-2" id="text-org7f6f53b"> <p> Now, I used a simple layout for the following images simply cause I was too lazy to make more complex ones. Keep in mind, that these commands can work for <b>any</b> complex window layout you can cook up. </p> <p> I would suggest trying them and playing around with them, but if you don't have emacs 31, this is a preview. </p> </div> <div id="outline-container-org9beed48" class="outline-3"> <h3 id="org9beed48">Transpose</h3> <div class="outline-text-3" id="text-org9beed48"> <p> <code>M-x transpose-window-layout</code> </p> <p> This one is basiclly diagonal reflection. </p> <figure id="orgb948b55"> <img src="../../2025/windows/transpose.png" alt="transpose.png"> </figure> </div> </div> <div id="outline-container-orgfa898cb" class="outline-3"> <h3 id="orgfa898cb">Rotate layout</h3> <div class="outline-text-3" id="text-orgfa898cb"> <p> <code>M-x rotate-window-layout-clockwise</code> </p> <figure id="org2dc1f56"> <img src="../../2025/windows/rotate-clock.png" alt="rotate-clock.png"> </figure> <p> <code>M-x rotate-window-layout-anticlockwise</code> </p> <figure id="orgde0f8b8"> <img src="../../2025/windows/rotate-anto.png" alt="rotate-anto.png"> </figure> </div> </div> <div id="outline-container-org0043671" class="outline-3"> <h3 id="org0043671">Flip</h3> <div class="outline-text-3" id="text-org0043671"> <p> <code>M-x flip-window-layout-horizontally</code> </p> <figure id="org7161a33"> <img src="../../2025/windows/flip-h.png" alt="flip-h.png"> </figure> <p> <code>M-x flip-window-layout-vertically</code> </p> <figure id="org194cf40"> <img src="../../2025/windows/flip-v.png" alt="flip-v.png"> </figure> </div> </div> <div id="outline-container-org1520f12" class="outline-3"> <h3 id="org1520f12">Cycle (rotate windows)</h3> <div class="outline-text-3" id="text-org1520f12"> <p> This one is my personal favourite. </p> <p> <code>M-x rotate-windows</code> </p> <figure id="org0c8fbd7"> <img src="../../2025/windows/cycle.png" alt="cycle.png"> </figure> <p> <code>M-x rotate-windows-back</code> </p> <figure id="orga55bdd4"> <img src="../../2025/windows/cycle-anti.png" alt="cycle-anti.png"> </figure> </div> </div> </section> </article> </body> </html>
